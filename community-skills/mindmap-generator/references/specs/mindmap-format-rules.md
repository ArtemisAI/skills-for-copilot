# 思维导图格式规范

## 核心原则

思维导图使用 Markdown 标题层级表示节点深度，必须符合以下核心规范：

1. **层级清晰**: 使用 # 到 ###### 表示 1-6 级节点
2. **逻辑合理**: 父子节点关系递进，同级节点关系并列
3. **内容简洁**: 每个节点简明扼要，不超过 2 行
4. **格式规范**: 符合标准 Markdown 语法

## 标题层级规范

### 基本规则

```markdown
# 一级标题 - 核心主题（根节点，全文唯一）
## 二级标题 - 主要分支（3-7个为宜）
### 三级标题 - 二级分支
#### 四级标题 - 三级分支
##### 五级标题 - 四级分支
###### 六级标题 - 最深层级（避免过度使用）
```

### 层级约束

1. **必须从一级标题开始**: 文件第一行必须是 `#` 标题
2. **不可跳级**: 不允许从 `##` 直接跳到 `####`
3. **深度限制**: 建议不超过 5 层，最多 6 层
4. **同级数量**: 建议每层不超过 7 个节点（符合认知规律）

### 错误示例

```markdown
❌ 错误 1: 跳级
# 主题
#### 跳过了二级和三级

❌ 错误 2: 没有根节点
## 直接从二级开始

❌ 错误 3: 层级过深
# 层1
## 层2
### 层3
#### 层4
##### 层5
###### 层6
####### 层7 (不存在的层级)
```

### 正确示例

```markdown
✅ 正确示例
# Hooks 概念全景分析
## 执行摘要
### 核心发现
#### Hooks 是跨领域通用的程序扩展机制
#### 不同技术栈中的 Hooks 实现方式存在显著差异
### 关键价值
#### 解耦性
#### 可扩展性
## 核心概念解析
### 通用定义
#### 钩子（Hook）是程序运行过程中预留的可扩展接口
```

## 内容规范

### 节点内容

1. **简洁性**
   - 每个节点控制在 1-2 行
   - 使用简明扼要的表达
   - 避免冗长的句子

2. **完整性**
   - 表达完整的意思
   - 不省略关键信息
   - 避免歧义

3. **一致性**
   - 同级节点表达风格一致
   - 统一使用名词短语或动宾短语
   - 保持语态一致

### 节点命名

**优先使用名词短语**:
```markdown
✅ 推荐
## 核心概念
### 基本定义
### 主要特征

❌ 不推荐
## 我们来看看核心概念
### 什么是基本定义
### 了解主要特征
```

**避免冗余**:
```markdown
✅ 推荐
## 前端框架
### React
### Vue

❌ 不推荐
## 前端框架
### 前端框架之 React
### 前端框架之 Vue
```

## 结构规范

### 常见结构模式

**模式 1: 概念分析型**

```markdown
# [概念名称]
## 执行摘要
### 核心发现
### 关键价值
## 核心概念解析
### 通用定义
### 核心特征
### 生活化类比
## 详细展开
### 各领域实现
### 应用场景
## 总结与展望
```

**模式 2: 技术架构型**

```markdown
# [系统名称]
## 架构概览
### 整体架构
### 核心组件
### 技术选型
## 前端架构
### 技术栈
### 目录结构
### 核心模块
## 后端架构
### 技术栈
### 服务设计
### 数据模型
## 部署架构
### 基础设施
### 部署流程
```

**模式 3: 流程梳理型**

```markdown
# [流程名称]
## 流程概览
### 流程目标
### 关键角色
### 核心阶段
## 详细步骤
### 阶段一
#### 步骤1.1
#### 步骤1.2
### 阶段二
#### 步骤2.1
#### 步骤2.2
## 注意事项
### 常见问题
### 最佳实践
```

**模式 4: 知识体系型**

```markdown
# [主题名称]
## 知识地图
### 核心概念
### 学习路径
## 基础知识
### 概念A
### 概念B
## 进阶知识
### 技术C
### 技术D
## 实战应用
### 场景1
### 场景2
```

### 结构平衡

1. **避免单子节点**
```markdown
❌ 不推荐（单子节点）
## 前端技术
### React
## 后端技术

✅ 推荐（多子节点或合并）
## 前端技术
### React
### Vue
## 后端技术
```

2. **保持同级平衡**
```markdown
❌ 不推荐（严重不平衡）
## 分支A
### 子节点1
### 子节点2
### 子节点3
## 分支B
### 子节点1
#### 详细1
#### 详细2
#### 详细3
#### 详细4
#### 详细5

✅ 推荐（相对平衡）
## 分支A
### 子节点1
### 子节点2
### 子节点3
## 分支B
### 子节点1
### 子节点2
### 子节点3
```

## Markdown 语法规范

### 基本语法

**粗体强调**:
```markdown
**重点内容**
```

**代码引用**:
```markdown
`code` 或 `function_name`
```

**列表**:
```markdown
- 项目1
- 项目2
  - 子项目2.1
  - 子项目2.2
```

**代码块**:
````markdown
```python
def example():
    pass
```
````

### 使用场景

1. **节点内简短列表**（不超过 5 项）
```markdown
### 核心特征
#### 事件驱动：由特定生命周期或动作触发
#### 回调机制：执行事先注册的函数
#### 非侵入式：无需修改原有代码即可增强功能
```

2. **节点内展开说明**
```markdown
### React Hooks
#### 引入背景：React 16.8 新增特性，使函数组件具备状态管理和生命周期能力。
#### 核心 API
##### useState：管理组件状态
##### useEffect：处理副作用（如 DOM 更新、订阅）
```

3. **代码示例**（适当使用）
```markdown
### 使用示例
#### 基本用法
```python
hook.register('before_request', callback)
```
```

### 注意事项

1. **避免过度使用列表**: 优先使用标题层级
2. **保持一致性**: 同类内容使用相同格式
3. **适度使用强调**: 不要过多使用粗体

## 文件格式规范

### 文件属性

- **编码**: UTF-8
- **换行符**: LF (Unix)
- **文件扩展名**: .md

### 文件结构

```markdown
# 核心主题（必须，唯一）

## 第一个主要分支（必须）
### 详细内容

## 第二个主要分支
### 详细内容

## 最后一个主要分支
### 详细内容
```

### 空行规则

1. **标题前后**: 一级、二级标题前后各一空行
2. **三级及以下**: 标题后直接内容，不需要空行
3. **内容块**: 代码块、列表等前后各一空行

**示例**:
```markdown
# 主题

## 主要分支

### 详细内容
#### 具体说明
#### 更多说明

### 另一个详细内容
#### 具体说明

## 另一个主要分支

### 详细内容
```

## 质量检查清单

### 必须满足

- [ ] 文件以一级标题开始
- [ ] 标题层级不跳级
- [ ] 节点深度不超过 6 层
- [ ] 每个节点内容简洁（不超过 2 行）
- [ ] UTF-8 编码
- [ ] Markdown 语法正确

### 建议满足

- [ ] 标题深度不超过 5 层
- [ ] 每层节点数量 3-7 个
- [ ] 避免单子节点
- [ ] 同级节点风格一致
- [ ] 结构相对平衡
- [ ] 逻辑清晰合理

### 禁止出现

- [ ] 标题跳级
- [ ] 节点过长（超过 3 行）
- [ ] 严重不平衡（某分支过深或过多）
- [ ] 空标题
- [ ] 语法错误
- [ ] 编码错误

## 工具支持

### 验证脚本

使用 `validate-mindmap.sh` 自动检查格式：

```bash
./scripts/validate-mindmap.sh <文件路径>
```

### 常见错误码

- `E001`: 文件不以一级标题开始
- `E002`: 标题层级跳级
- `E003`: 超出最大层级深度（6层）
- `E004`: 节点内容过长
- `E005`: 编码错误（非UTF-8）
- `W001`: 单子节点警告
- `W002`: 层级深度建议（超过5层）
- `W003`: 同级节点过多（超过7个）

## 参考资源

- 示例文件: 参考项目根目录的 `xmind_demo.md`
- 验证工具: `scripts/validate-mindmap.sh`
- 质量评估: `scripts/review-mindmap.sh`
